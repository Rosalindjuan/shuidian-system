webpackJsonp([1],{ZNfy:function(e,t){},hKel:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Dd8w"),c=s.n(n),r=s("D4TX"),o=s("gyMJ"),a=s("NYxO"),i={components:{Crumbs:r.a},data:function(){return{crumbs2:"新建模板",name:"",remarks:"",readonly:!1,stocks:[],checkedStocks:[],checkAll:!1,isIndeterminate:!0}},computed:c()({},Object(a.c)(["userInfo"])),methods:c()({},Object(a.b)(["TOSAST_STATE","GET_USERINFO","REMOVE_USERINFO"]),{handleCheckAllChange:function(e){this.checkedStocks=e?this.stocks:[],this.isIndeterminate=!1},handleCheckedChange:function(e){var t=e.length;this.checkAll=t===this.stocks.length,this.isIndeterminate=t>0&&t<this.stocks.length},checkname:function(){return!!this.name.trim()||(console.log("请输入名称"),this.TOSAST_STATE({text:"请输入名称"}),!1)},checkStock:function(){return!(this.checkedStocks.length<1)||(console.log("请选择货物"),this.TOSAST_STATE({text:"请选择货物"}),!1)},onSubmit:function(){var e=this;if(this.checkStock()&&this.checkname()){var t={username:this.userInfo.user,token:this.userInfo.token,name:this.name,remarks:this.remarks,goods:this.checkedStocks};this.readonly?Object(o.w)(t).then(function(t){e.TOSAST_STATE({text:t.msg}),2==t.errcode&&(e.REMOVE_USERINFO(),e.$router.push("/login"))}):Object(o.o)(t).then(function(t){e.TOSAST_STATE({text:t.msg}),t.errcode?2==t.errcode&&(e.REMOVE_USERINFO(),e.$router.push("/login")):(e.name="",e.remarks="",e.checkedStocks=e.stocks,e.isIndeterminate=!1,e.checkAll=!0)})}},judgeEequal:function(e,t){var s=[];return e.length==t.length&&(e.forEach(function(e){t.forEach(function(t){e==t&&s.push(e)})}),s.length==e.length)},setDetail:function(){var e=this;if(this.$route.params.id){this.crumbs2="模板详情",this.readonly=!0;var t={username:this.userInfo.user,token:this.userInfo.token,id:this.$route.params.id};Object(o.p)(t).then(function(t){if(console.log(t),t.errcode)e.TOSAST_STATE({text:t.msg}),2==t.errcode&&(e.REMOVE_USERINFO(),e.$router.push("/login"));else{e.name=t.data.name,e.remarks=t.data.remarks,e.checkedStocks=t.data.list;var s=e.judgeEequal(e.stocks,e.checkedStocks);e.isIndeterminate=e.checkedStocks.length>0&&!s,e.checkAll=s}})}else this.crumbs2="新建模板",this.name="",this.remarks="",this.readonly=!1,this.isIndeterminate=!1,this.checkedStocks=this.stocks,this.checkAll=!0}}),created:function(){var e=this;Object(o.k)({username:this.userInfo.user,token:this.userInfo.token}).then(function(t){t.errcode?(e.TOSAST_STATE({text:t.msg}),2==t.errcode&&(e.REMOVE_USERINFO(),e.$router.push("/login"))):(e.stocks=t.data.list,e.setDetail())})},watch:{$route:function(){this.setDetail()}}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Crumbs",{attrs:{crumbs1:"模板",crumbs2:e.crumbs2}}),e._v(" "),s("div",{staticClass:"form-box"},[s("el-form",[s("el-form-item",{attrs:{label:"模板名称"}},[s("el-input",{attrs:{disabled:e.readonly},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[s("el-input",{model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}})],1),e._v(" "),s("el-form-item",[s("p",[e._v("选择需要的物料添加至模板")]),e._v(" "),s("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选\n        ")]),e._v(" "),s("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.checkedStocks,callback:function(t){e.checkedStocks=t},expression:"checkedStocks"}},e._l(e.stocks,function(t){return s("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var l=s("VU/8")(i,h,!1,function(e){s("ZNfy")},"data-v-609f3fd8",null);t.default=l.exports}});
//# sourceMappingURL=1.e5441ec6e3912eb55d57.js.map