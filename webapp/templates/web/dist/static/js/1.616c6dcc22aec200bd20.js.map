{"version":3,"sources":["webpack:///src/components/page/StockNew.vue","webpack:///./src/components/page/StockNew.vue?23eb","webpack:///./src/components/page/StockNew.vue"],"names":["StockNew","Crumbs","computed","extends_default","Object","vuex_esm","methods","_this","this","addNum","user","token","name","newNum","unit","opening_price","price","remarks","msg","REMOVE_USERINFO","_this2","res","data","setDetail","userInfo","page_StockNew","render","_vm","_h","$createElement","_c","_self","attrs","crumbs1","crumbs2","_v","staticClass","ref","model","form","rules","label-width","label","prop","disabled","readonly","value","callback","$$v","$set","expression","type","on","click","onSubmit","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"uLAwCAA,eAIAC,SAAA,kCAGA,iBACA,wEACA,wDAEA,sDAGA,YAEAC,SAAAC,OAAAC,OAAAC,EAAA,EAAAD,EAEA,cACAE,QAAAH,OAAAC,OAAAC,EAAA,EAAAD,EAAA,8BACA,yCAEA,IAAAG,EAAAC,kDACAC,kCAEAC,yBACAC,qBACAC,SACAC,iBACAC,6BACAC,8BACAC,wBAEAC,gEA2BA,oEAtBAC,iCAKAC,iCACA,0BAJA,eACAN,kBAOA,qEAEAK,iCAIAC,iCACA,mFAHA,+BAYA,IAAAC,EAAAZ,8BACA,cACA,sBACA,2FACAE,mDAEAW,qCAKAH,4CAGAC,iCACA,WACA,gBARAG,mBACA,uBAYA,sBACA,6EACA,+BAKAC,6BACAC,yCAIAD,eCtIAE,GADiBC,OAFjB,WAA0B,IAAAC,EAAAnB,KAAaoB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,UAA8BE,OAAOC,QAAA,KAAAC,QAAAP,EAAAO,WAAsCP,EAAAQ,GAAA,KAAAL,EAAA,OAAwBM,YAAA,aAAuBN,EAAA,WAAgBO,IAAA,YAAAL,OAAuBM,MAAAX,EAAAY,KAAAC,MAAAb,EAAAa,MAAAC,cAAA,UAAyDX,EAAA,gBAAqBE,OAAOU,MAAA,KAAAC,KAAA,UAA4Bb,EAAA,YAAiBE,OAAOY,SAAAjB,EAAAkB,UAAwBP,OAAQQ,MAAAnB,EAAAY,KAAA,KAAAQ,SAAA,SAAAC,GAA+CrB,EAAAsB,KAAAtB,EAAAY,KAAA,OAAAS,IAAgCE,WAAA,gBAAyB,GAAAvB,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCE,OAAOU,MAAA,KAAAC,KAAA,UAA4Bb,EAAA,YAAiBQ,OAAOQ,MAAAnB,EAAAY,KAAA,KAAAQ,SAAA,SAAAC,GAA+CrB,EAAAsB,KAAAtB,EAAAY,KAAA,OAAAS,IAAgCE,WAAA,gBAAyB,GAAAvB,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCE,OAAOU,MAAA,KAAAC,KAAA,WAA6Bb,EAAA,YAAiBQ,OAAOQ,MAAAnB,EAAAY,KAAA,MAAAQ,SAAA,SAAAC,GAAgDrB,EAAAsB,KAAAtB,EAAAY,KAAA,QAAAS,IAAiCE,WAAA,iBAA0B,GAAAvB,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCE,OAAOU,MAAA,KAAAC,KAAA,aAA+Bb,EAAA,YAAiBE,OAAOmB,KAAA,YAAkBb,OAAQQ,MAAAnB,EAAAY,KAAA,QAAAQ,SAAA,SAAAC,GAAkDrB,EAAAsB,KAAAtB,EAAAY,KAAA,UAAAS,IAAmCE,WAAA,mBAA4B,GAAAvB,EAAAQ,GAAA,KAAAL,EAAA,gBAAAA,EAAA,aAAqDE,OAAOmB,KAAA,WAAiBC,IAAKC,MAAA1B,EAAA2B,YAAsB3B,EAAAQ,GAAA,yBAEpuCoB,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACA1D,EACAyB,GATA,EAVA,SAAAkC,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/1.616c6dcc22aec200bd20.js","sourcesContent":["<template>\n  <div>\n    <Crumbs crumbs1=\"物料\" :crumbs2=\"crumbs2\"></Crumbs>\n    <div class=\"form-box\">\n      <el-form :model=\"form\" :rules=\"rules\" ref=\"rulesform\" label-width=\"80px\">\n        <el-form-item label=\"名称\" prop=\"name\">\n          <el-input v-model=\"form.name\" :disabled=\"readonly\"></el-input>\n        </el-form-item>\n        <!--<el-form-item label=\"数量\" prop=\"num\">-->\n        <!--<el-input v-model=\"form.num\" :disabled=\"readonly\"></el-input>-->\n        <!--</el-form-item>-->\n        <!--<el-form-item label=\"添加数量\" prop=\"addNum\">-->\n        <!--<el-input v-model=\"form.addNum\"></el-input>-->\n        <!--</el-form-item>-->\n        <el-form-item label=\"单位\" prop=\"unit\">\n          <el-input v-model=\"form.unit\"></el-input>\n        </el-form-item>\n        <!--<el-form-item label=\"进价\" prop=\"opening_price\">-->\n        <!--<el-input v-model=\"form.opening_price\"></el-input>-->\n        <!--</el-form-item>-->\n        <el-form-item label=\"单价\" prop=\"price\">\n          <el-input v-model=\"form.price\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"备注\" prop=\"remarks\">\n          <el-input type=\"textarea\" v-model=\"form.remarks\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"onSubmit\">提交</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\n  import Crumbs from \"../common/Crumbs.vue\"\n  import {newStock, updateStock, getStock} from \"../../api\"\n  import {mapMutations, mapState} from 'vuex'\n\n\n  export default {\n    components: {\n      Crumbs\n    },\n    data() {\n      return {\n        crumbs2: '新建物料',\n        readonly: false,\n        form: {name: '', num: 0, addNum: 0, unit: '个', opening_price: 0, price: 0, remarks: ''},\n        rules: {\n          name: [{required: true, message: '请输入物料名称', trigger: 'blur'}],\n          unit: [{required: true, message: '请输入物料单位', trigger: 'blur'}],\n        }\n      }\n    },\n    computed: {\n      ...mapState(['userInfo'])\n    },\n    methods: {\n      ...mapMutations(['TOSAST_STATE', 'GET_USERINFO', 'REMOVE_USERINFO']),\n      // 提交\n      onSubmit() {\n        let newNum = parseInt(this.form.num) + parseInt(this.form.addNum)\n        let params = {\n          username: this.userInfo.user,\n          token: this.userInfo.token,\n          name: this.form.name,\n          num: newNum,\n          unit: this.form.unit,\n          opening_price: this.form.opening_price,\n          price: this.form.price,\n          remarks: this.form.remarks\n        }\n        this.$refs['rulesform'].validate((valid) => {\n          if (valid) {\n            if (this.readonly) { // 更新物料信息\n              updateStock(params).then(res => {\n                this.TOSAST_STATE({text: res.msg})\n                if (!res.errcode) {\n                  this.form.addNum = '0'\n                  this.form.num = newNum\n                } else if (res.errcode == 2) {\n                  this.REMOVE_USERINFO()\n                  this.$router.push('/login');\n                }\n              })\n            } else { // 创建物料\n              console.log('chuangjian')\n              newStock(params).then(res => {\n                this.TOSAST_STATE({text: res.msg})\n                if (!res.errcode) {\n                  this.form = {name: '', num: 0, addNum: 0, unit: '个', opening_price: 0, price: 0, remarks: ''}\n                } else if (res.errcode == 2) {\n                  this.REMOVE_USERINFO()\n                  this.$router.push('/login');\n                }\n              })\n            }\n          } else {\n            return false;\n          }\n        });\n      },\n      setDetail() {\n        if (this.$route.params.id) {\n          this.crumbs2 = '物品详情'\n          this.readonly = true\n          let param = {params: {id: this.$route.params.id, token: this.userInfo.token, username: this.userInfo.user}}\n          getStock(param).then(res => {\n            console.log(res)\n            if (!res.errcode) {\n              this.form = res.data\n              this.form.addNum = 0\n            } else {\n              this.TOSAST_STATE({text: res.msg})\n              if (res.errcode == 2) {\n                setTimeout(() => {\n                  this.REMOVE_USERINFO()\n                  this.$router.push('/login');\n                }, 1000)\n              }\n            }\n          })\n        } else {\n          this.crumbs2 = '新建物料'\n          this.readonly = false\n          this.form = {name: '', num: 0, addNum: 0, unit: '个', opening_price: 0, price: 0, remarks: ''}\n        }\n      }\n    },\n    created() {\n      this.setDetail()\n      console.log(this.userInfo)\n    },\n    watch: {\n      '$route'() {\n        this.setDetail()\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .form-box {\n    padding-top: 20px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/page/StockNew.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Crumbs',{attrs:{\"crumbs1\":\"物料\",\"crumbs2\":_vm.crumbs2}}),_vm._v(\" \"),_c('div',{staticClass:\"form-box\"},[_c('el-form',{ref:\"rulesform\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"disabled\":_vm.readonly},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"单位\",\"prop\":\"unit\"}},[_c('el-input',{model:{value:(_vm.form.unit),callback:function ($$v) {_vm.$set(_vm.form, \"unit\", $$v)},expression:\"form.unit\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"单价\",\"prop\":\"price\"}},[_c('el-input',{model:{value:(_vm.form.price),callback:function ($$v) {_vm.$set(_vm.form, \"price\", $$v)},expression:\"form.price\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"备注\",\"prop\":\"remarks\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.remarks),callback:function ($$v) {_vm.$set(_vm.form, \"remarks\", $$v)},expression:\"form.remarks\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"提交\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f04c866c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/page/StockNew.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f04c866c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./StockNew.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./StockNew.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./StockNew.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f04c866c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./StockNew.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f04c866c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/page/StockNew.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}