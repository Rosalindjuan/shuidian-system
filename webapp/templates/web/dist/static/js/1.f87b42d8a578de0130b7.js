webpackJsonp([1],{aAkD:function(e,r){},xetX:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("Dd8w"),o=t.n(n),s=t("D4TX"),i=t("gyMJ"),m=t("NYxO"),a={components:{Crumbs:s.a},data:function(){return{crumbs2:"新建物料",readonly:!1,form:{name:"",num:0,addNum:0,unit:"个",opening_price:0,price:0,remarks:""},rules:{name:[{required:!0,message:"请输入物料名称",trigger:"blur"}],unit:[{required:!0,message:"请输入物料单位",trigger:"blur"}]}}},computed:o()({},Object(m.c)(["userInfo"])),methods:o()({},Object(m.b)(["TOSAST_STATE","GET_USERINFO","REMOVE_USERINFO"]),{onSubmit:function(){var e=this,r=parseInt(this.form.num)+parseInt(this.form.addNum),t={username:this.userInfo.user,token:this.userInfo.token,name:this.form.name,num:r,unit:this.form.unit,opening_price:this.form.opening_price,price:this.form.price,remarks:this.form.remarks};this.$refs.rulesform.validate(function(n){if(!n)return!1;e.readonly?Object(i.x)(t).then(function(t){e.TOSAST_STATE({text:t.msg}),t.errcode?2==t.errcode&&(e.REMOVE_USERINFO(),e.$router.push("/login")):(e.form.addNum="0",e.form.num=r)}):Object(i.p)(t).then(function(r){e.TOSAST_STATE({text:r.msg}),r.errcode?2==r.errcode&&(e.REMOVE_USERINFO(),e.$router.push("/login")):e.form={name:"",num:0,addNum:0,unit:"个",opening_price:0,price:0,remarks:""}})})},setDetail:function(){var e=this;if(this.$route.params.id){this.crumbs2="物品详情",this.readonly=!0;var r={params:{id:this.$route.params.id,token:this.userInfo.token,username:this.userInfo.user}};Object(i.k)(r).then(function(r){console.log(r),r.errcode?(e.TOSAST_STATE({text:r.msg}),2==r.errcode&&setTimeout(function(){e.REMOVE_USERINFO(),e.$router.push("/login")},1e3)):(e.form=r.data,e.form.addNum=0)})}else this.crumbs2="新建物料",this.readonly=!1,this.form={name:"",num:0,addNum:0,unit:"个",opening_price:0,price:0,remarks:""}}}),created:function(){this.setDetail(),console.log(this.userInfo)},watch:{$route:function(){this.setDetail()}}},u={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("Crumbs",{attrs:{crumbs1:"物料",crumbs2:e.crumbs2}}),e._v(" "),t("div",{staticClass:"form-box"},[t("el-form",{ref:"rulesform",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{attrs:{disabled:e.readonly},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"单位",prop:"unit"}},[t("el-input",{model:{value:e.form.unit,callback:function(r){e.$set(e.form,"unit",r)},expression:"form.unit"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"单价",prop:"price"}},[t("el-input",{model:{value:e.form.price,callback:function(r){e.$set(e.form,"price",r)},expression:"form.price"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.remarks,callback:function(r){e.$set(e.form,"remarks",r)},expression:"form.remarks"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var c=t("VU/8")(a,u,!1,function(e){t("aAkD")},"data-v-e4125038",null);r.default=c.exports}});
//# sourceMappingURL=1.f87b42d8a578de0130b7.js.map