webpackJsonp([2],{RHtk:function(e,t){},hKel:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=n("Dd8w"),s=n.n(c),o=n("D4TX"),r=n("gyMJ"),a=n("NYxO"),i={components:{Crumbs:o.a},data:function(){return{crumbs2:"新建模板",name:"",remarks:"",readonly:!1,stocks:[],checkedStocks:[],checkAll:!1,isIndeterminate:!0}},methods:s()({},Object(a.b)(["TOSAST_STATE"]),{handleCheckAllChange:function(e){this.checkedStocks=e?this.stocks:[],this.isIndeterminate=!1},handleCheckedChange:function(e){var t=e.length;this.checkAll=t===this.stocks.length,this.isIndeterminate=t>0&&t<this.stocks.length},checkname:function(){return!!this.name.trim()||(console.log("请输入名称"),this.TOSAST_STATE({text:"请输入名称"}),!1)},checkStock:function(){return!(this.checkedStocks.length<1)||(console.log("请选择货物"),this.TOSAST_STATE({text:"请选择货物"}),!1)},onSubmit:function(){var e=this;if(this.checkStock()&&this.checkname()){var t=JSON.parse(localStorage.getItem("userInfo")),n={username:t.user,token:t.token,name:this.name,remarks:this.remarks,goods:this.checkedStocks};this.readonly?Object(r.v)(n).then(function(t){e.TOSAST_STATE({text:t.msg}),2==t.errcode&&setTimeout(function(){localStorage.removeItem("userInfo"),e.$router.push("/login")},1e3)}):Object(r.o)(n).then(function(t){e.TOSAST_STATE({text:t.msg}),t.errcode?2==t.errcode&&setTimeout(function(){localStorage.removeItem("userInfo"),e.$router.push("/login")},1e3):(e.name="",e.remarks="",e.checkedStocks=e.stocks,e.isIndeterminate=!1,e.checkAll=!0)})}},judgeEequal:function(e,t){var n=[];return e.length==t.length&&(e.forEach(function(e){t.forEach(function(t){e==t&&n.push(e)})}),n.length==e.length)},setDetail:function(){var e=this;if(this.$route.params.id){this.crumbs2="模板详情",this.readonly=!0;var t=JSON.parse(localStorage.getItem("userInfo")),n={username:t.user,token:t.token,id:this.$route.params.id};Object(r.p)(n).then(function(t){if(console.log(t),!t.errcode){e.name=t.data.name,e.remarks=t.data.remarks,e.checkedStocks=t.data.list;var n=e.judgeEequal(e.stocks,e.checkedStocks);e.isIndeterminate=e.checkedStocks.length>0&&!n,e.checkAll=n}})}else this.crumbs2="新建模板",this.name="",this.remarks="",this.readonly=!1,this.isIndeterminate=!1,this.checkedStocks=this.stocks,this.checkAll=!0}}),created:function(){var e=this,t=JSON.parse(localStorage.getItem("userInfo"));Object(r.k)({username:t.user,token:t.token}).then(function(t){t.errcode?(e.TOSAST_STATE({text:t.msg}),2==t.errcode&&setTimeout(function(){localStorage.removeItem("userInfo"),e.$router.push("/login")},1e3)):(e.stocks=t.data.list,e.setDetail())})},watch:{$route:function(){this.setDetail()}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Crumbs",{attrs:{crumbs1:"模板",crumbs2:e.crumbs2}}),e._v(" "),n("div",{staticClass:"form-box"},[n("el-form",[n("el-form-item",{attrs:{label:"模板名称"}},[n("el-input",{attrs:{disabled:e.readonly},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[n("el-input",{model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}})],1),e._v(" "),n("el-form-item",[n("p",[e._v("选择需要的物料添加至模板")]),e._v(" "),n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选\n        ")]),e._v(" "),n("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.checkedStocks,callback:function(t){e.checkedStocks=t},expression:"checkedStocks"}},e._l(e.stocks,function(t){return n("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var h=n("VU/8")(i,l,!1,function(e){n("RHtk")},"data-v-08c654e4",null);t.default=h.exports}});
//# sourceMappingURL=2.7bba6294ce5e0d1f6dd1.js.map