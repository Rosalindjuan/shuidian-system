{"version":3,"sources":["webpack:///src/components/page/TemplateNew.vue","webpack:///./src/components/page/TemplateNew.vue?a072","webpack:///./src/components/page/TemplateNew.vue"],"names":["Crumbs","computed","extends_default","Object","vuex_esm","methods","length","_this","this","user","token","name","remarks","checkedStocks","msg","REMOVE_USERINFO","stocks","item","_this2","id","res","list","ifAll","_this3","setDetail","page_TemplateNew","render","_vm","_h","$createElement","_c","_self","attrs","crumbs1","crumbs2","_v","staticClass","label","disabled","readonly","model","value","callback","$$v","expression","prop","indeterminate","isIndeterminate","on","change","handleCheckAllChange","checkAll","handleCheckedChange","_l","stock","key","_s","type","click","onSubmit","staticRenderFns","Component","__webpack_require__","normalizeComponent","TemplateNew","ssrContext","__webpack_exports__"],"mappings":"sMAoCAA,SAAA,kCAGA,YACA,WACA,aACA,uCAGA,mBAEA,IAEAC,SAAAC,OAAAC,OAAAC,EAAA,EAAAD,EAEA,cACAE,QAAAH,OAAAC,OAAAC,EAAA,EAAAD,EAAA,8BACA,gHAIA,2CAIAG,qCACAA,+CACAA,oEAKA,iCACA,WACA,6EAOA,iCACA,WACA,wBAKA,IAAAC,EAAAC,4CACA,+BAEAC,yBACAC,gBACAC,kBACAC,mBAEAC,oFAGAC,uBAEAC,iCACA,oEAKAD,iCAQAC,iCACA,mBAPA,aACA,qBACAC,0BACA,cACA,+HAgBAC,iDASA,IAAAC,EAAAV,8BACA,cACA,sBACA,qFACAW,mDAEAC,oCASAN,uBAEAC,iCACA,eAXA,eACAJ,sBACAC,+BACAS,oCACAR,4DACAS,aACAA,uBAWA,iBACA,gBACA,kBACA,wBACA,0BACAN,sBACA,wBAIA,IAAAO,EAAAf,6HAMAM,uBAEAC,iCACA,6BANAM,OACAG,8CAcAA,eCvLAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAnB,KAAaoB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,UAA8BE,OAAOC,QAAA,KAAAC,QAAAP,EAAAO,WAAsCP,EAAAQ,GAAA,KAAAL,EAAA,OAAwBM,YAAA,aAAuBN,EAAA,WAAAA,EAAA,gBAAmCE,OAAOK,MAAA,UAAgBP,EAAA,YAAiBE,OAAOM,SAAAX,EAAAY,UAAwBC,OAAQC,MAAAd,EAAA,KAAAe,SAAA,SAAAC,GAA0ChB,EAAAhB,KAAAgC,GAAaC,WAAA,WAAoB,GAAAjB,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCE,OAAOK,MAAA,KAAAQ,KAAA,aAA+Bf,EAAA,YAAiBU,OAAOC,MAAAd,EAAA,QAAAe,SAAA,SAAAC,GAA6ChB,EAAAf,QAAA+B,GAAgBC,WAAA,cAAuB,GAAAjB,EAAAQ,GAAA,KAAAL,EAAA,gBAAAA,EAAA,KAAAH,EAAAQ,GAAA,kBAAAR,EAAAQ,GAAA,KAAAL,EAAA,eAAoGE,OAAOc,cAAAnB,EAAAoB,iBAAoCC,IAAKC,OAAAtB,EAAAuB,sBAAkCV,OAAQC,MAAAd,EAAA,SAAAe,SAAA,SAAAC,GAA8ChB,EAAAwB,SAAAR,GAAiBC,WAAA,cAAwBjB,EAAAQ,GAAA,kBAAAR,EAAAQ,GAAA,KAAAL,EAAA,qBAA+DkB,IAAIC,OAAAtB,EAAAyB,qBAAiCZ,OAAQC,MAAAd,EAAA,cAAAe,SAAA,SAAAC,GAAmDhB,EAAAd,cAAA8B,GAAsBC,WAAA,kBAA6BjB,EAAA0B,GAAA1B,EAAA,gBAAA2B,GAAqC,OAAAxB,EAAA,eAAyByB,IAAAD,EAAAtB,OAAiBK,MAAAiB,KAAe3B,EAAAQ,GAAAR,EAAA6B,GAAAF,UAA0B,GAAA3B,EAAAQ,GAAA,KAAAL,EAAA,gBAAAA,EAAA,aAAsDE,OAAOyB,KAAA,WAAiBT,IAAKU,MAAA/B,EAAAgC,YAAsBhC,EAAAQ,GAAA,yBAE9vCyB,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAC,EACAvC,GATA,EAVA,SAAAwC,GACAH,EAAA,SAaA,kBAEA,MAUAI,EAAA,QAAAL,EAAA","file":"static/js/2.27c4ec0a30cf0309a454.js","sourcesContent":["<template>\n  <div>\n    <Crumbs crumbs1=\"模板\" :crumbs2=\"crumbs2\"></Crumbs>\n    <div class=\"form-box\">\n      <el-form>\n        <el-form-item label=\"模板名称\">\n          <el-input v-model=\"name\" :disabled=\"readonly\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"备注\" prop=\"remarks\">\n          <el-input v-model=\"remarks\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <p>选择需要的物料添加至模板</p>\n          <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选\n          </el-checkbox>\n          <el-checkbox-group v-model=\"checkedStocks\" @change=\"handleCheckedChange\">\n            <el-checkbox v-for=\"stock in stocks\" :label=\"stock\" :key=\"stock\">{{stock}}</el-checkbox>\n          </el-checkbox-group>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"onSubmit\">提交</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\n  import Crumbs from \"../common/Crumbs.vue\"\n  import {getStocks, newTemplate, temGoodsList, updateTemplate} from \"../../api\"\n  import {mapMutations, mapState} from 'vuex'\n\n  export default {\n    components: {\n      Crumbs\n    },\n    data() {\n      return {\n        crumbs2: '新建模板',\n        name: '',\n        remarks: '',\n        readonly: false,\n        stocks: [],\n        checkedStocks: [],\n        checkAll: false,\n        isIndeterminate: true\n      }\n    },\n    computed: {\n      ...mapState(['userInfo'])\n    },\n    methods: {\n      ...mapMutations(['TOSAST_STATE', 'GET_USERINFO', 'REMOVE_USERINFO']),\n      // 是否全选\n      handleCheckAllChange(val) {\n        this.checkedStocks = val ? this.stocks : [];\n        this.isIndeterminate = false;\n      },\n      // 多选选择\n      handleCheckedChange(value) {\n        let checkedCount = value.length;\n        this.checkAll = checkedCount === this.stocks.length;\n        this.isIndeterminate = checkedCount > 0 && checkedCount < this.stocks.length;\n      },\n      // 判断是否输入名称\n      checkname() {\n        if (!this.name.trim()) {\n          console.log('请输入名称')\n          this.TOSAST_STATE({text: '请输入名称'})\n          return false\n        }\n        return true\n      },\n      // 判断是否选择货物\n      checkStock() {\n        if (this.checkedStocks.length < 1) {\n          console.log('请选择货物')\n          this.TOSAST_STATE({text: '请选择货物'})\n          return false\n        }\n        return true\n      },\n      // 提交\n      onSubmit() {\n        if (this.checkStock() && this.checkname()) {\n          let param = {\n            username: this.userInfo.user,\n            token: this.userInfo.token,\n            name: this.name,\n            remarks: this.remarks,\n            goods: this.checkedStocks\n          }\n          if (this.readonly) { // 更新模板\n            updateTemplate(param).then(res => {\n              this.TOSAST_STATE({text: res.msg})\n              if (res.errcode == 2) {\n                this.REMOVE_USERINFO()\n                this.$router.push('/login');\n              }\n            })\n          } else { // 新建模板\n            newTemplate(param).then(res => {\n              this.TOSAST_STATE({text: res.msg})\n              if (!res.errcode) {\n                this.name = ''\n                this.remarks = ''\n                this.checkedStocks = this.stocks\n                this.isIndeterminate = false;\n                this.checkAll = true\n              } else if (res.errcode == 2) {\n                this.REMOVE_USERINFO()\n                this.$router.push('/login');\n              }\n            })\n          }\n        }\n      },\n      // 判断arr2里面的元素是否和arr1一样\n      judgeEequal(arr1, arr2) {\n        let arr = []\n        if (arr1.length == arr2.length) {\n          arr1.forEach(item => {\n            arr2.forEach(item2 => {\n              if (item == item2) {\n                arr.push(item)\n              }\n            })\n          })\n          return arr.length == arr1.length ? true : false\n        } else {\n          return false\n        }\n      },\n      setDetail() {\n        if (this.$route.params.id) {\n          this.crumbs2 = '模板详情'\n          this.readonly = true\n          let param = {username: this.userInfo.user, token: this.userInfo.token, id: this.$route.params.id}\n          temGoodsList(param).then(res => {\n            console.log(res)\n            if (!res.errcode) {\n              this.name = res.data.name\n              this.remarks = res.data.remarks\n              this.checkedStocks = res.data.list\n              let ifAll = this.judgeEequal(this.stocks, this.checkedStocks)\n              this.isIndeterminate = this.checkedStocks.length > 0 && !ifAll\n              this.checkAll = ifAll\n            } else {\n              this.TOSAST_STATE({text: res.msg})\n              if (res.errcode == 2) {\n                this.REMOVE_USERINFO()\n                this.$router.push('/login');\n              }\n            }\n          })\n        } else {\n//          console.log('新建模板')\n          this.crumbs2 = '新建模板'\n          this.name = ''\n          this.remarks = ''\n          this.readonly = false\n          this.isIndeterminate = false;\n          this.checkedStocks = this.stocks\n          this.checkAll = true\n        }\n      }\n    },\n    created() {\n      getStocks({username: this.userInfo.user, token: this.userInfo.token}).then(res => {\n        if (!res.errcode) {\n          this.stocks = res.data.list\n          this.setDetail()\n        } else {\n          this.TOSAST_STATE({text: res.msg})\n          if (res.errcode == 2) {\n            this.REMOVE_USERINFO()\n            this.$router.push('/login');\n          }\n        }\n      })\n\n\n    },\n    watch: {\n      '$route'() {\n        this.setDetail()\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .el-checkbox+.el-checkbox {\n    margin-left: 0;\n  }\n  .el-checkbox {\n    margin-right: 30px;\n    margin-left: 0;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/page/TemplateNew.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Crumbs',{attrs:{\"crumbs1\":\"模板\",\"crumbs2\":_vm.crumbs2}}),_vm._v(\" \"),_c('div',{staticClass:\"form-box\"},[_c('el-form',[_c('el-form-item',{attrs:{\"label\":\"模板名称\"}},[_c('el-input',{attrs:{\"disabled\":_vm.readonly},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"备注\",\"prop\":\"remarks\"}},[_c('el-input',{model:{value:(_vm.remarks),callback:function ($$v) {_vm.remarks=$$v},expression:\"remarks\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('p',[_vm._v(\"选择需要的物料添加至模板\")]),_vm._v(\" \"),_c('el-checkbox',{attrs:{\"indeterminate\":_vm.isIndeterminate},on:{\"change\":_vm.handleCheckAllChange},model:{value:(_vm.checkAll),callback:function ($$v) {_vm.checkAll=$$v},expression:\"checkAll\"}},[_vm._v(\"全选\\n        \")]),_vm._v(\" \"),_c('el-checkbox-group',{on:{\"change\":_vm.handleCheckedChange},model:{value:(_vm.checkedStocks),callback:function ($$v) {_vm.checkedStocks=$$v},expression:\"checkedStocks\"}},_vm._l((_vm.stocks),function(stock){return _c('el-checkbox',{key:stock,attrs:{\"label\":stock}},[_vm._v(_vm._s(stock))])}))],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"提交\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-609f3fd8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/page/TemplateNew.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-609f3fd8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TemplateNew.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TemplateNew.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TemplateNew.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-609f3fd8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TemplateNew.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-609f3fd8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/page/TemplateNew.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}